<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Test</title>
</head>
<body>
    <h1>WebSocket Test</h1>
    <button id="connect">Connect</button>
    <button id="send">Send Message</button>
    <button id="close">Close Connection</button>
    <div id="output"></div>

    <script>
        let socket;

        document.getElementById('connect').onclick = () => {
            socket = new WebSocket('ws://localhost:5050');
            socket.onopen = () => appendMessage('Connected to WebSocket server');
            socket.onmessage = (event) => appendMessage(`Received: ${event.data}`);
            socket.onclose = () => appendMessage('Connection closed');
            socket.onerror = (error) => appendMessage(`Error: ${error.message}`);
        };

        document.getElementById('send').onclick = () => {
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send('Hello from test.html!');
            } else {
                appendMessage('WebSocket is not open');
            }
        };

        document.getElementById('close').onclick = () => {
            if (socket) socket.close();
        };

        function appendMessage(message) {
            const output = document.getElementById('output');
            const messageElement = document.createElement('p');
            messageElement.textContent = message;
            output.appendChild(messageElement);
        }
    </script>
</body>
</html>
